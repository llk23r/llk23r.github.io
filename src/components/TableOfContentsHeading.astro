---
import type { MarkdownHeading } from 'astro'

interface Props {
  heading: MarkdownHeading
}

const {
  heading: { depth, slug, text },
} = Astro.props
---

<li class={`toc-item depth-${depth}`} data-heading-id={slug}>
  <a href={`#${slug}`}>{text}</a>
</li>

<style>
  .toc-item {
    border-left: 2px solid var(--theme-separator);
    padding-left: 14px;
    padding-block: 6px;
    font-size: 0.8rem;
    line-height: 1.5;
    transition:
      border-color 0.2s,
      color 0.2s;
  }

  .toc-item.depth-3 {
    padding-left: 28px;
    font-size: 0.75rem;
  }

  .toc-item a {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Larger touch targets in mobile drawer */
  :global(.toc-mobile-drawer) .toc-item {
    padding-block: 10px;
    font-size: 0.875rem;
  }

  :global(.toc-mobile-drawer) .toc-item.depth-3 {
    font-size: 0.8rem;
  }

  .toc-item a:hover {
    color: var(--theme-accent);
  }

  .toc-item.past {
    border-left-color: var(--theme-accent);
  }

  .toc-item.active-heading {
    border-left: 3px solid var(--theme-accent);
    font-weight: 600;
  }

  .toc-item.active-heading a {
    color: var(--theme-accent);
  }
</style>
